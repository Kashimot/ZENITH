<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="user dashboard.css">
</head>
<body>
    <div class="container transparent-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <h1>User Dashboard</h1>
            <!-- File Upload Section -->
            <button class="upload-file-btn" onclick="window.location.href = 'upload.html'">Upload File</button>
            <button class="create-folder-btn" onclick="window.location.href = 'create.html'">Folder</button>
            <button class="search-btn" onclick="window.location.href = 'search.html'">Search</button>
            <button class="logout-btn" onclick="window.location.href = 'LOGIN.HTML'">Logout</button>

            
            
            
        </div>
    </div>
    

        <!-- Content Area -->
        <div class="content">
            <!-- Display Folder Counter -->
            <div class="folder-counter">
                <h2>Folder Counter</h2>
                <p id="folderCounter">0</p>
            </div>

            <!-- Display File Counter -->
            <div class="file-counter">
                <h2>File Counter</h2>
                <p id="fileCounter">0</p>
            </div>
        </div>
    </div>


    <script>
        function createFolder() {
            var folderName = document.getElementById("folderName").value;

            // Check if folder already exists
            var existingFolders = document.querySelectorAll("#folderList li");
            for (var i = 0; i < existingFolders.length; i++) {
                if (existingFolders[i].textContent.toLowerCase() === folderName.toLowerCase()) {
                    alert("Folder already exists!");
                    return;
                }
            }

            // Create folder and add to the list with time and date
            var folderList = document.getElementById("folderList");
            var listItem = document.createElement("li");
            var currentDate = new Date();
            var creationDate = currentDate.toLocaleString();
            var folderId = "folder_" + Date.now(); // Generate a unique folder ID
            listItem.innerHTML = `<span data-folderid="${folderId}">${folderName}</span>
                                  <span class="timestamp">${creationDate}</span>
                                  <button onclick="openFolder('${folderId}')">Open</button>
                                  <button onclick="deleteFolder('${folderId}')">Delete</button>
                                  <input type="file" id="fileInput_${folderId}" style="display:none" onchange="uploadFile('${folderId}')"/> 
                                  <label for="fileInput_${folderId}">Upload File</label>`;
            folderList.appendChild(listItem);
            
            // Update folder counter
            var folderCounter = document.getElementById("folderCounter");
            folderCounter.textContent = parseInt(folderCounter.textContent) + 1;
        }

        function openFolder(folderId) {
            var folderName = document.querySelector(`[data-folderid="${folderId}"]`).textContent;
            alert(`Opening folder: ${folderName} (ID: ${folderId})`);
            // Implement opening folder logic here
        }

        function deleteFolder(folderId) {
            var folderName = document.querySelector(`[data-folderid="${folderId}"]`).textContent;
            if (confirm(`Are you sure you want to delete the folder: ${folderName} (ID: ${folderId})?`)) {
                var folderList = document.getElementById("folderList");
                var folderToRemove = document.querySelector(`[data-folderid="${folderId}"]`).parentNode;
                folderList.removeChild(folderToRemove);
                alert(`Folder deleted: ${folderName} (ID: ${folderId})`);
                
                // Update folder counter
                var folderCounter = document.getElementById("folderCounter");
                folderCounter.textContent = parseInt(folderCounter.textContent) - 1;
            }
        }

        function uploadFile(folderId) {
            var fileInput = document.getElementById(`fileInput_${folderId}`);
            var fileList = document.getElementById("fileList");

            // Implement file upload logic here
            var fileName = fileInput.files[0].name;
            var fileId = "file_" + Date.now(); // Generate a unique file ID
            alert(`Uploading file '${fileName}' to folder: ${folderId} (File ID: ${fileId})`);

            // Display uploaded file in the list
            var listItem = document.createElement("li");
            listItem.textContent = fileName;
            listItem.id = fileId;
            fileList.appendChild(listItem);
            
            // Update file counter
            var fileCounter = document.getElementById("fileCounter");
            fileCounter.textContent = parseInt(fileCounter.textContent) + 1;
        }

        function search() {
            var searchInput = document.getElementById("searchInput").value.toLowerCase();
            var folders = document.querySelectorAll("#folderList li span[data-folderid]");
            var files = document.querySelectorAll("#fileList li");

            folders.forEach(function (folder) {
                var folderId = folder.getAttribute("data-folderid");
                var folderName = folder.textContent.toLowerCase();
                var folderElement = document.querySelector(`[data-folderid="${folderId}"]`).parentNode;
                folderElement.style.display = folderName.includes(searchInput) ? "block" : "none";
            });

            files.forEach(function (file) {
                var fileName = file.textContent.toLowerCase();
                var fileElement = document.getElementById(file.id);
                fileElement.style.display = fileName.includes(searchInput) ? "block" : "none";
            });
        }
    </script>
</body>
</html>
